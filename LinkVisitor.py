import sys
import selenium, selenium.webdriver
from selenium.webdriver.chrome.options import Options
import random


def open_url_with_proxy(url, proxy_address):
    """Ã–ffnet eine URL mit dem angegebenen Proxy."""
    chrome_options = Options()
    chrome_options.add_argument('--headless')  # Browser im Hintergrund
    chrome_options.add_argument('--no-sandbox')
    chrome_options.add_argument('--disable-dev-shm-usage')
    chrome_options.add_argument(f'--proxy-server={proxy_address}')

    try:
        driver = selenium.webdriver.Chrome(
            options=chrome_options
        )

        driver.get(url)
        print(f"Opened {url} with proxy {proxy_address}")
        driver.quit()
    except Exception as e:
        print(f"Error: {e}")
        print(f"Could not open {url} with proxy {proxy_address}")
        pass




if (len(sys.argv) < 3):
    print("Usage: python LinkVisitor.py <link> <number_of_iterations>")
    sys.exit(1)

link = sys.argv[1]
x = int(sys.argv[2])

proxyList = [
    "85.214.158.184:18123",
    "114.129.2.82:8081",
    "20.235.47.207:3128",
    "8.219.97.248:80",
    "43.133.59.220:3128",
    "93.171.220.229:8888",
    "13.80.134.180:80",
    "47.242.47.64:8888",
    "54.38.181.125:3128",
    "51.75.122.80:80",
    "210.212.39.138:8080",
    "20.210.113.32:8123",
    "216.246.40.215:8999",
    "47.74.152.29:8888",
    "20.24.43.214:80",
    "46.47.197.210:3128",
    "20.206.106.192:8123",
    "209.97.150.167:8080",
    "103.127.1.130:80",
    "139.162.78.109:8080",
    "13.81.217.201:80",
    "103.163.51.254:80",
    "162.240.75.37:80",
    "35.211.38.54:80",
    "82.223.102.92:9443",
    "122.175.19.164:80",
    "103.75.117.85:80",
    "195.12.191.2:80",
    "20.193.154.130:8888",
    "103.94.52.70:3128",
    "217.160.99.39:80",
    "154.0.12.163:80",
    "185.212.60.62:80",
    "78.28.152.113:80",
    "50.223.239.191:80",
    "50.168.163.176:80",
    "50.171.187.50:80",
    "50.172.39.98:80",
    "50.222.245.47:80",
    "66.191.31.158:80",
    "50.168.163.166:80",
    "50.174.145.15:80",
    "50.168.163.182:80",
    "50.222.245.40:80",
    "50.168.163.178:80",
    "50.173.182.90:80",
    "50.207.199.83:80",
    "50.174.145.10:80",
    "50.174.145.13:80",
    "216.137.184.253:80",
    "24.205.201.186:80",
    "154.208.10.126:80",
    "50.239.72.17:80",
    "50.223.239.165:80",
    "50.222.245.41:80",
    "50.144.168.74:80",
    "50.174.145.14:80",
    "50.174.145.9:80",
    "50.221.74.130:80",
    "50.168.72.118:80",
    "50.174.7.157:80",
    "50.144.166.226:80",
    "50.168.72.122:80",
    "50.222.245.46:80",
    "50.174.7.156:80",
    "50.207.199.81:80",
    "50.217.226.43:80",
    "50.217.226.45:80",
    "50.168.72.113:80",
    "50.175.212.77:80",
    "50.171.68.130:80",
    "50.172.75.124:80",
    "50.222.245.43:80",
    "50.168.72.112:80",
    "50.122.86.118:80",
    "50.168.163.179:80",
    "50.174.145.11:80",
    "50.231.104.58:80",
    "68.185.57.66:80",
    "50.223.239.166:80",
    "50.239.72.19:80",
    "50.223.239.160:80",
    "50.174.7.153:80",
    "50.174.145.8:80",
    "50.239.72.16:80",
    "50.168.163.181:80",
    "34.122.187.196:80",
    "50.168.163.180:80",
    "50.145.24.186:80",
    "50.217.226.47:80",
    "50.175.212.74:80",
    "50.172.106.214:80",
    "50.222.245.42:80",
    "50.232.104.86:80",
    "50.174.145.12:80",
    "50.223.239.161:80",
    "50.207.199.86:80",
    "50.172.75.126:80",
    "50.202.75.26:80",
    "50.174.7.158:80",
    "103.126.87.120:8082",
    "38.188.248.35:8181",
    "202.4.119.97:5020",
    "114.69.225.6:83",
    "103.76.149.102:8181",
    "195.149.98.211:8181",
    "191.101.80.162:80",
    "138.197.102.119:80",
    "35.209.198.222:80",
    "83.169.17.201:80",
    "178.170.9.226:80",
    "198.49.68.80:80",
    "51.255.20.138:80",
    "195.114.209.50:80",
    "147.182.180.242:80",
    "67.43.227.228:12643",
    "138.91.159.185:80",
    "31.223.184.143:80",
    "65.109.189.49:80",
    "146.190.177.143:80",
    "89.116.34.113:80",
    "167.172.96.213:80",
    "101.47.4.29:6066",
    "144.126.225.19:8081",
    "149.202.91.219:80",
    "74.48.78.52:80",
    "103.133.221.251:80",
    "103.189.254.245:1111",
    "198.44.255.3:80",
    "178.128.113.118:23128",
    "49.249.155.3:80",
    "137.184.121.54:80",
    "123.205.24.244:8197",
    "176.65.240.15:80",
    "198.74.51.79:8888",
    "122.10.225.55:8000",
    "185.217.143.96:80",
    "117.250.3.58:8080",
    "146.59.202.70:80",
    "200.174.198.86:8888",
    "192.73.244.36:80",
    "116.203.28.43:80",
    "79.174.12.190:80",
    "185.159.153.109:80",
    "84.39.112.144:3128",
    "37.27.81.120:80",
    "37.27.82.72:80",
    "34.81.160.132:80",
    "4.236.183.37:8080",
    "133.18.234.13:80",
    "95.217.178.175:80",
    "103.107.182.16:25512",
    "159.203.103.28:80",
    "34.175.101.255:80",
    "35.185.196.38:3128",
    "172.96.117.205:38001",
    "51.89.73.162:80",
    "37.27.29.181:80",
    "50.223.239.183:80",
    "50.169.135.10:80",
    "62.99.138.162:80",
    "211.128.96.206:80",
    "50.169.37.50:80",
    "32.223.6.94:80",
    "50.231.172.74:80"
]

for i in range(x):
    open_url_with_proxy(link, random.choice(proxyList))
    print("Iteration " + str(i) + " done.")